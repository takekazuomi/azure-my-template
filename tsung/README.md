# Deploy a Virtual Machine with Tsung

<a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Ftakekazuomi%2Fazure-my-templates%2Ftsung%2Ftsung%2Fazuredeploy.json" target="_blank">
    <img src="http://azuredeploy.net/deploybutton.png"/>
</a>

This template allows you to create a Linux Virtual Machine with Tsung, This template also deploys a Storage Account, Virtual Network, Public IP addresses, a Public domain namespace, and a Network Interface.

NOTE: The SSH rsa public key is typically generated by ssh-keygen, among other tools, on Linux, Mac, or Windows. If you already have an ~/.ssh/id_rsa.pub file, that will work directly, as you would expect.

MEMO
https://github.com/Azure/azure-linux-extensions/tree/master/CustomScript


Switch-AzureMode AzureResourceManager
New-AzureResourceGroupDeployment -Name <deployment-name> -ResourceGroupName <resource-group-name> -TemplateUri https://raw.githubusercontent.com/takekazuomi/azure-my-templates/tsung/tsung/azuredeploy.json


$ mkdir ~/.tsung/
$ cp /usr/share/doc/tsung/examples/http_simple.xml ~/.tsung/tsung.xmla

edit ~/.tsung/tsung.xml for you



http://tsung.erlang-projects.org/user_manual/installation.html


The default configuration file is ~/.tsung/tsung.xml (there are several sample files in /usr/share/doc/tsung/examples).
Log files are saved in ~/.tsung/log/. A new subdirectory is created for each test using the current date and time as name, e.g. ~/.tsung/log/20040217-0940.

tsung -f myconfigfile.xml start
